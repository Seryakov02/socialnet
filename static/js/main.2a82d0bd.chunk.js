(this.webpackJsonpsocialnet=this.webpackJsonpsocialnet||[]).push([[0],{146:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e){if(!e)return"Field is required"},a=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}}},161:function(e,t,n){e.exports=n.p+"static/media/user.471a1ad3.png"},221:function(e,t,n){e.exports=n.p+"static/media/preloader.c0504cf3.gif"},250:function(e,t,n){e.exports=n(433)},258:function(e,t,n){},37:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return f}));var r=n(91),a=n(0),o=n.n(a),u=n(153),i=function(e){e.input;var t=e.meta,n=t.touched,r=t.error,a=e.children,u=n&&r;return o.a.createElement("div",{className:u?"error":null},a,o.a.createElement("div",null,u&&o.a.createElement("span",null,r)))},s=function(e){var t=e.input,n=(e.meta,e.child,Object(r.a)(e,["input","meta","child"]));return o.a.createElement(i,e,o.a.createElement("textarea",Object.assign({},t,n)))},c=function(e){var t=e.input,n=(e.meta,e.child,Object(r.a)(e,["input","meta","child"]));return o.a.createElement(i,e,o.a.createElement("input",Object.assign({},t,n)))},l=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6?arguments[6]:void 0;return o.a.createElement("div",null,o.a.createElement(u.a,Object.assign({placeholder:e,name:t,component:r,validate:n},a,{style:s})),o.a.createElement("label",null,i))},d={padding:"3px 5px",border:"1px solid #ccc",borderRadius:"4px",display:"inline-block",background:"#fff",cursor:"pointer",width:"80px",marginTop:"8px"},f={width:"20%",padding:"3px 5px",margin:"8px 0",display:"inline-block",border:"1px solid #ccc",borderRadius:"4px",boxSizing:"border-box"}},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return i}));var r=n(211),a=r.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"32b355ef-2996-4cfd-a32d-b063f1403f9d"}}),o={me:function(){return a.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},logout:function(){return a.delete("auth/login").then((function(e){return e.data}))}},u={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return a.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},unfollow:function(e){return a.delete("follow/".concat(e)).then((function(e){return e.data}))},follow:function(e){return a.post("follow/".concat(e)).then((function(e){return e.data}))},getUserProfile:function(e){return i.getUserProfile(e)},loginAuth:function(e){return a.post("auth/".concat(e)).then((function(e){return e.data}))}},i={getUserProfile:function(e){return a.get("profile/"+e).then((function(e){return e.data}))},getStatus:function(e){return a.get("profile/status/"+e).then((function(e){return e.data}))},updateStatus:function(e){return a.put("profile/status",{status:e}).then((function(e){return e.data}))}}},433:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(5),u=n.n(o),i=n(36),s=n(22),c=(n(258),n(105)),l=n(106),d=n(110),f=n(107),p=n(111),g=n(40),m=n(15),h=n(9),E=n(26),b=n.n(E),v=n(75),w=n(41),y=function(e,t,n,r){return{type:h.j,payload:{userId:e,email:t,login:n,isAuth:r}}},O=function(){return function(e){var t,n,r,a,o;return b.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,b.a.awrap(w.a.me());case 2:0===(t=u.sent).resultCode&&(n=t.data,r=n.id,a=n.login,o=n.email,e(y(r,o,a,!0)));case 4:case"end":return u.stop()}}))}},P=n(434),j=n(18),x=n(438),I=function(e){var t=e.login,n=e.isAuth,r=e.logout;return a.a.createElement("div",{className:"sidebar"},a.a.createElement(P.a,{style:{width:256,height:"100%",position:"relative"},defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],mode:"inline"},a.a.createElement(P.a.Item,{key:"1"},a.a.createElement(i.b,{to:"/profile"},a.a.createElement(j.a,{type:"home"}),"Profile")),a.a.createElement(P.a.Item,{key:"2"},a.a.createElement(i.b,{to:"/im"},a.a.createElement(j.a,{type:"message"}),"Message")),a.a.createElement(P.a.Item,{key:"3"},a.a.createElement(i.b,{to:"/users"},a.a.createElement(j.a,{type:"user"}),"Users")),a.a.createElement("div",{style:{width:"100%",height:"40px",background:"#f1f1f1",position:"absolute",bottom:"0"}},n?a.a.createElement("div",{style:{margin:"7px 0 0 10px"}},a.a.createElement("p",{style:{display:"inline",marginRight:"100px"}},t),a.a.createElement(x.a,{type:"dashed",size:"small",onClick:r},"Logout")):a.a.createElement("div",{style:{margin:"8px 0 0 10px"}},a.a.createElement(x.a,{size:"small"},a.a.createElement(i.b,{to:"/login"},"Login"))))))},S=Object(s.b)((function(e){return{login:e.auth.login,isAuth:e.auth.isAuth}}),{logout:function(){return function(e){return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.awrap(w.a.logout());case 2:0===t.sent.resultCode&&e(y(null,null,null,!1));case 4:case"end":return t.stop()}}))}}})((function(e){return a.a.createElement(I,e)})),C=n(208),U=n(436),z=n(37),T=n(146),_=Object(C.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return a.a.createElement("form",{onSubmit:t},Object(z.c)("Email","email",[T.b],z.a,null,null,z.e),Object(z.c)("Password","password",[T.b],z.a,{type:"password"},null,z.e),Object(z.c)(null,"rememberMe",[],U.a,{type:"checkbox"}," Remember me"),n&&a.a.createElement("div",null,n),a.a.createElement("div",null,a.a.createElement("button",{style:z.d},"Login")))})),k=Object(s.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(r){var a,o;return b.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,b.a.awrap(w.a.login(e,t,n));case 2:0===(a=u.sent).resultCode?r(O()):(o=a.messages.length>0?a.messages[0]:"Some error",r(Object(v.a)("login",{_error:o})));case 4:case"end":return u.stop()}}))}}})((function(e){return e.isAuth?a.a.createElement(g.a,{to:"/"}):a.a.createElement("div",null,a.a.createElement("h1",null,"Login"),a.a.createElement(_,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}}))})),A=n(91),F=n(435),L=function(e){for(var t=e.totalUsersCount,n=e.pageSize,r=e.onPageChanged,o=Math.ceil(t/n),u=[],i=1;i<=o;i++)u.push(i);return a.a.createElement("div",{style:{marginTop:"40px"}},a.a.createElement(F.a,{onChange:function(e){r(e)},total:10*u.length}))},R=n(161),N=n.n(R),G=function(e){var t=e.user,n=e.followingInProgress,r=e.unfollow,o=e.follow,u=e.authorizedUserId,s={padding:"0 5px"};return a.a.createElement("div",{style:{display:"flex",marginBottom:"10px"}},a.a.createElement("span",{style:{marginRight:"20px"}},a.a.createElement("div",{style:{marginBottom:"3px"}},a.a.createElement(i.b,{to:"/profile/"+t.id},a.a.createElement("img",{src:null!=t.photos.small?t.photos.small:N.a,style:{width:"50px",height:"50px",borderRadius:"50%"},alt:t.fullName}))),t.followed?a.a.createElement(x.a,{style:s,disabled:n.some((function(e){return e===t.id})),onClick:function(){r(t.id)}},"Unfollow"):a.a.createElement(x.a,{style:s,disabled:n.some((function(e){return e===t.id})),onClick:function(){t.id!==u&&o(t.id)}},"Follow")),a.a.createElement("span",null,a.a.createElement("div",null,a.a.createElement("div",null,t.name),a.a.createElement("div",null,t.status),a.a.createElement("div",null,"user.location.country"),a.a.createElement("div",null,"user.location.city"))))},M=function(e){var t=e.currentPage,n=e.totalUsersCount,r=e.pageSize,o=e.onPageChanged,u=e.users,i=e.authorizedUserId,s=Object(A.a)(e,["currentPage","totalUsersCount","pageSize","onPageChanged","users","authorizedUserId"]);return a.a.createElement("div",null,u.map((function(e){return a.a.createElement(G,{user:e,key:e.id,followingInProgress:s.followingInProgress,unfollow:s.unfollow,follow:s.follow,authorizedUserId:i})})),a.a.createElement(L,{currentPage:t,onPageChanged:o,totalUsersCount:n,pageSize:r}))},D=n(72),q=function(e){return{type:h.d,userId:e}},B=function(e){return{type:h.n,userId:e}},H=function(e){return{type:h.f,currentPage:e}},K=function(e){return{type:h.l,isFetching:e}},W=function(e,t){return{type:h.m,isFetching:e,userId:t}},J=function(e,t,n,r){return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e(W(!0,t)),a.next=3,b.a.awrap(n(t));case 3:0===a.sent.resultCode&&e(r(t)),e(W(!1,t));case 6:case"end":return a.stop()}}))},X=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).onPageChanged=function(e){var t=n.props.pageSize;n.props.requestUsers(e,t)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,n=e.pageSize;this.props.requestUsers(t,n)}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,this.props.isFetching?a.a.createElement(D.a,null):null,a.a.createElement(M,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,unfollow:this.props.unfollow,follow:this.props.follow,isFetching:this.props.isFetching,followingInProgress:this.props.followingInProgress,authorizedUserId:this.props.authorizedUserId}))}}]),t}(a.a.Component),V=Object(s.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress,authorizedUserId:e.auth.userId}}),{follow:function(e){return function(t){return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:J(t,e,w.c.follow.bind(w.c),q);case 1:case"end":return n.stop()}}))}},unfollow:function(e){return function(t){return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:J(t,e,w.c.unfollow.bind(w.c),B);case 1:case"end":return n.stop()}}))}},setCurrentPage:H,toggleFollowingProgress:W,requestUsers:function(e,t){return function(n){var r;return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n(K(!0)),a.next=3,b.a.awrap(w.c.getUsers(e,t));case 3:r=a.sent,n(K(!1)),n(H(e)),n((u=r.items,{type:h.i,users:u})),n((o=r.totalCount,{type:h.h,count:o}));case 8:case"end":return a.stop()}var o,u}))}}})(X),Y=a.a.lazy((function(){return n.e(3).then(n.bind(null,440))})),Z=a.a.lazy((function(){return n.e(4).then(n.bind(null,441))})),Q=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?a.a.createElement("div",{className:"wrapper"},a.a.createElement(S,null),a.a.createElement("div",{className:"wrapper__pages"},a.a.createElement(g.d,null,a.a.createElement(g.a,{exact:!0,from:"/",to:"/profile"}),a.a.createElement(g.b,{path:"/profile/:userId?",render:function(){return a.a.createElement(a.a.Suspense,{fallback:a.a.createElement(D.a,null)},a.a.createElement(Y,null))}}),a.a.createElement(g.b,{path:"/im",render:function(){return a.a.createElement(a.a.Suspense,{fallback:a.a.createElement(D.a,null)},a.a.createElement(Z,null))}}),a.a.createElement(g.b,{path:"/users",render:function(){return a.a.createElement(V,null)}}),a.a.createElement(g.b,{path:"/login",render:function(){return a.a.createElement(k,null)}})))):a.a.createElement(D.a,null)}}]),t}(a.a.Component),$=Object(m.d)(Object(s.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(O());Promise.all([t]).then((function(){e({type:h.e})}))}}}),g.g)(Q),ee=n(222),te=n(209),ne=n(16),re={userId:null,email:null,login:null,isAuth:!1},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.j:return Object(ne.a)({},e,{},t.payload);default:return e}},oe=n(74),ue={posts:[{id:1,message:"Test"},{id:2,message:"Test"}],newPostText:"",profile:null,status:""},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.b:var n={id:Math.random(),message:t.newPostText};return Object(ne.a)({},e,{posts:[].concat(Object(oe.a)(e.posts),[n])});case h.k:return Object(ne.a)({},e,{profile:t.profile});case h.g:return Object(ne.a)({},e,{status:t.status});case h.c:return Object(ne.a)({},e,{posts:e.posts.filter((function(e){return e.id!==t.postId}))});default:return e}},se={dialogs:[{id:1,name:"Grace"},{id:2,name:"Grace"},{id:3,name:"Evie"},{id:4,name:"Grace"}],messages:[{id:1,message:"Hello"},{id:2,message:"How are you?"},{id:3,message:"I\u2019m good, and you?"},{id:4,message:"I\u2019m fine"}]},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.a:return Object(ne.a)({},e,{messages:[].concat(Object(oe.a)(e.messages),[{id:Math.random(),message:t.newMessageBody}])});default:return e}},le={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},de=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(ne.a)({},e,{},r):e}))},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.d:return Object(ne.a)({},e,{users:de(e.users,t.userId,"id",{followed:!0})});case h.n:return Object(ne.a)({},e,{users:de(e.users,t.userId,"id",{followed:!1})});case h.i:return Object(ne.a)({},e,{users:t.users});case h.f:return Object(ne.a)({},e,{currentPage:t.currentPage});case h.h:return Object(ne.a)({},e,{totalUsersCount:t.count});case h.l:return Object(ne.a)({},e,{isFetching:t.isFetching});case h.m:return Object(ne.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(oe.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},pe={initialized:null},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.e:return Object(ne.a)({},e,{initialized:!0});default:return e}},me=Object(m.c)({profilePage:ie,dialogsPage:ce,usersPage:fe,auth:ae,form:te.a,app:ge}),he=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.d,Ee=Object(m.e)(me,he(Object(m.a)(ee.a)));window.store=Ee;var be=Ee;u.a.render(a.a.createElement(i.a,null,a.a.createElement(s.a,{store:be},a.a.createElement($,null))),document.getElementById("root"))},72:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(221),u=n.n(o);t.a=function(){return a.a.createElement("div",null,a.a.createElement("img",{src:u.a,alt:"preloader"}))}},9:function(e,t,n){"use strict";n.d(t,"j",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"k",(function(){return o})),n.d(t,"g",(function(){return u})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"n",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"h",(function(){return p})),n.d(t,"l",(function(){return g})),n.d(t,"m",(function(){return m})),n.d(t,"e",(function(){return h}));var r="SET_USER_DATA",a="ACCEPT-POST",o="SET_USER_PROFILE",u="SET_STATUS",i="DELETE_POST",s="ACCEPT-DIALOG",c="FOLLOW",l="UNFOLLOW",d="SET_USERS",f="SET_CURRENT_PAGE",p="SET_TOTAL_USERS_COUNT",g="TOGGLE_IS_FETCHING",m="TOGGLE_IS_FOLLOWING_PROGRESS",h="INITIALIZED_SUCCESS"}},[[250,1,2]]]);
//# sourceMappingURL=main.2a82d0bd.chunk.js.map